# Алгоритм обработки запроса (POST /api/registration):

1) Поступает POST запрос с телом:
```json
{
  "email": "exmaple@mail.com",
  "password": "123456",
}
```

2) Перед обработкой зпроса идет промежуточная обработка:

	- Вычленяется информация о девайсе с которого поступил запрос.
		```js
			{
				device_type = "string";
				browser_name = "string";
				browser_version = "string";
				os_name = "string";
				os_version = "string";
				ip_address = "string";
			}
		```

	- Форматирует свойство email в body, приводя его к lowcase.

	- Валидация свойства email. Формат соответсвует email.

	- Валидиция свойства password. Длина строки от 6 до 32.

3) Запрос переходит в контроллер.

4) Проверка на наличие ошибки по валидации. Если ошибки есть отправляется ответ со статусом 400 и кодом 2 validation_error

5) Создается объект нового пользователя и сохраняет в БД.

	- Проверяется в бд наличие пользовтеля с таким же email. Если есть то отправляется ошибка со статусом 409 и кодом 7

	- Сохраняется в бд новый пользователь.

6) Создает два токена и jti.

7) На основе рефреш токена создает объект сессиси и его ttl. Сохраняет в редис

8) Сохраняет рефреш токен в куки с ttl.

9) Ответ 200, возвращает access token